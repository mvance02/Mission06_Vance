@model IEnumerable<Collection>

@{
    ViewData["Title"] = "Movie Collection";
}

<!-- Page header with title and Add Movie button -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">Joel's Movie Collection</h1>
    <a asp-action="AddMovie" class="btn btn-success">
        <strong>+ Add Movie</strong>
    </a>
</div>

@if (!Model.Any())
{
    <!-- Empty state message when no movies exist -->
    <div class="alert alert-info" role="alert">
        No movies in the collection yet. Click <strong>+ Add Movie</strong> to get started!
    </div>
}
else
{
    <!-- Responsive Bootstrap table listing all movies -->
    <div class="table-responsive">
        <table class="table table-striped table-hover table-bordered align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Year</th>
                    <th>Director</th>
                    <th>Rating</th>
                    <th class="text-center">Edited</th>
                    <th class="text-center">On Plex</th>
                    <th>Lent To</th>
                    <th>Notes</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var movie in Model)
                {
                    <tr>
                        <td><strong>@movie.Title</strong></td>
                        <td>@movie.Category?.CategoryName</td>
                        <td>@movie.Year</td>
                        <td>@movie.Director</td>
                        <td>@movie.Rating</td>

                        <!-- Boolean columns display a checkmark or dash for clarity -->
                        <td class="text-center">
                            @if (movie.Edited == true)
                            {
                                <span class="text-success fw-bold">&#10003;</span>
                            }
                            else
                            {
                                <span class="text-muted">&mdash;</span>
                            }
                        </td>
                        <td class="text-center">
                            @if (movie.CopiedToPlex == true)
                            {
                                <span class="text-success fw-bold">&#10003;</span>
                            }
                            else
                            {
                                <span class="text-muted">&mdash;</span>
                            }
                        </td>

                        <td>@movie.LentTo</td>
                        <td>@movie.Notes</td>

                        <!-- Edit and Delete action buttons -->
                        <td class="text-center text-nowrap">
                            <a asp-action="EditMovie"
                               asp-route-id="@movie.CollectionID"
                               class="btn btn-sm btn-primary me-1">Edit</a>

                            <a asp-action="DeleteMovie"
                               asp-route-id="@movie.CollectionID"
                               class="btn btn-sm btn-danger">Delete</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Summary footer -->
    <p class="text-muted">
        Showing <strong>@Model.Count()</strong> movie(s) in the collection.
    </p>
}
